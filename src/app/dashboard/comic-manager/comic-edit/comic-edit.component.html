<div mdcHeadline3 *ngIf="comic" class="comic-title">{{comic.name}}</div>
<app-page-list *ngIf="comic" [comic]="comic"></app-page-list>
<div class="wrapper" *ngIf="comic">
    <mdc-card class="comic-card">
        <div class="comic-card-article-group-heading" mdcHeadline5>Editar dados</div>
        <mdc-ripple class="comic-card-navigation">
            <form [formGroup]="comicForm" id="comicForm">
                <mdc-list twoLine interactive="false">
                    <mdc-list-item>
                        <mdc-text-field formControlName="name" label="Nome da comic" fullwidth [helperText]="comicHelper"
                            required minlength="3"></mdc-text-field>
                        <mdc-text-field-helper-text #comicHelper="mdcHelperText" validation>
                            <span *ngIf="comicForm.controls['name'].errors?.required">Campo Nome é obrigatório</span>
                        </mdc-text-field-helper-text>
                    </mdc-list-item>
                    <mdc-list-item>
                        <mdc-text-field formControlName="description" label="Descricao da comic" fullwidth [helperText]="descriptionHelper"
                            required minlength="3"></mdc-text-field>
                        <mdc-text-field-helper-text #descriptionHelper="mdcHelperText" validation>
                            <span *ngIf="comicForm.controls['description'].errors?.required">Campo Descrição é
                                obrigatória</span>
                        </mdc-text-field-helper-text>
                    </mdc-list-item>
                    <mdc-list-item>
                        Tornar pública
                        <mdc-checkbox mdcListItemMeta formControlName="isPublic"></mdc-checkbox>
                    </mdc-list-item>
                    <mdc-list-item>
                        Ativar comentários
                        <mdc-checkbox mdcListItemMeta formControlName="isCommentActive"></mdc-checkbox>
                    </mdc-list-item>
                    <mdc-list-item>
                        Selecione a capa
                        <input mdcListItemMeta #imageInput type="file" accept="image/*" (change)="processFile(imageInput)">
                    </mdc-list-item>
                </mdc-list>
            </form>
        </mdc-ripple>
        <mdc-card-actions>
            <mdc-card-action-buttons>
                <button mdc-button unelevated mdcCardAction="button" (click)="submitForm()">Salvar edição</button>
            </mdc-card-action-buttons>
        </mdc-card-actions>
        <mdc-ripple class="comic-card-comments" *ngIf="selectedFile">
            <mdc-list-divider></mdc-list-divider>
            <div class="img-preview-container">

                <div class="img-preview{{selectedFile.status === 'fail' ? '-error' : ''}}" [ngStyle]="{'background-image': 'url('+ selectedFile.src + ')'}">
                </div>

                <div *ngIf="selectedFile.pending" class="img-loading-overlay">
                    <div class="img-spinning-circle"></div>
                </div>

                <div *ngIf="selectedFile.status === 'ok'" class="alert alert-success">Comic criada com sucesso</div>
                <div *ngIf="selectedFile.status === 'fail'" class="alert alert-danger">Falha na criação da comic</div>
            </div>
        </mdc-ripple>
    </mdc-card>
</div>